<nz-breadcrumb>
  <nz-breadcrumb-item>Quick Scan</nz-breadcrumb-item>
  <nz-breadcrumb-item>Scan History</nz-breadcrumb-item>
</nz-breadcrumb>
<div class="func-area">
  <div class="pfy-btn-right">
    <button (click)="addScan()" nz-button nzType="primary">Add Scan</button>
    <button (click)="reloadPipelines()" nzShape="round" nzType="default" nz-button>
      <i nz-icon
         nzType="reload"
         nzTheme="outline">
      </i>Reload
    </button>
  </div>
</div>
<div class="pfy-page-content">

  <nz-tabset [nzTabPosition]="'left'"
             [nzType]="'line'"
             [nzSelectedIndex]="selectedTabIndex"
             (nzSelectChange)="handleSelectChange($event)">
    <nz-tab [nzTitle]="'BTC'">
      <pfy-table
        [tblColumns]="btcTblColumns"
        [tblData]="btcPipelinePage.content"
        [tblTotal]="btcPipelinePage.totalElements"
        [(pageIndex)]="btcPage"
        [loading]="isBtcLoading"
        (detailClick)="handleBtcDetailClick($event)"
        [pageable]="true"
        [pageSizeOptions]="btcPageSizeOptions"
        (pageSizeChange)="handlePageSizeChange($event)"
      ></pfy-table>
    </nz-tab>
    <nz-tab [nzTitle]="'ETH'">
      <pfy-table
        [tblColumns]="ethTblColumns"
        [tblData]="ethPipelinePage.content"
        [tblTotal]="ethPipelinePage.totalElements"
        [(pageIndex)]="btcPage"
        [loading]="isEthLoading"
        (detailClick)="handleEthDetailClick($event)"
        [pageable]="true"
        [slotTemplate]="{'totalScore':totalScore,'avgScore':avgScore}"
        [pageSizeOptions]="ethPageSizeOptions"
        (pageSizeChange)="handlePageSizeChange($event)"
      >
        <ng-template #totalScore let-data="retVal">
          <td>
            <span
              *ngIf="data.status === 'COMPLETED' || data.status === 'FAILED'; else elseTmpl">{{ data.totalScoreEv | number:'.1-3'}}</span>
            <ng-template #elseTmpl>
              <i nz-icon nzType="loading" nzTheme="outline"></i>
            </ng-template>
          </td>
        </ng-template>
        <ng-template #avgScore let-data="retVal">
          <td>
            <span
              *ngIf="data.status === 'COMPLETED' || data.status === 'FAILED'; else elseTmpl">{{ data.avgScoreEv | number:'.1-3'}}</span>
            <ng-template #elseTmpl>
              <i nz-icon nzType="loading" nzTheme="outline"></i>
            </ng-template>
          </td>
        </ng-template>
      </pfy-table>
    </nz-tab>
    <nz-tab [nzTitle]="'XRP'">
      <pfy-table
        [tblColumns]="xrpTblColumns"
        [tblData]="xrpPipelinePage.content"
        [tblTotal]="xrpPipelinePage.totalElements"
        [(pageIndex)]="xrpPage"
        [loading]="isXrpLoading"
        (detailClick)="handleXrpDetailClick($event)"
        [pageable]="true"
        (pageSizeChange)="handlePageSizeChange($event)"
        [pageSizeOptions]="xrpPageSizeOptions"
        [slotTemplate]="{'totalScore':xrpTotalScore,'avgScore':xrpAvgScore}"
      >
        <ng-template #xrpTotalScore let-data="retVal">
          <td>
            <span
              *ngIf="data.status === 'COMPLETED' || data.status === 'FAILED'; else elseTmpl">{{ data.totalScoreEv | number:'.1-3'}}</span>
            <ng-template #elseTmpl>
              <i nz-icon nzType="loading" nzTheme="outline"></i>
            </ng-template>
          </td>
        </ng-template>
        <ng-template #xrpAvgScore let-data="retVal">
          <td>
            <span
              *ngIf="data.status === 'COMPLETED' || data.status === 'FAILED'; else elseTmpl">{{ data.avgScoreEv | number:'.1-3'}}</span>
            <ng-template #elseTmpl>
              <i nz-icon nzType="loading" nzTheme="outline"></i>
            </ng-template>
          </td>
        </ng-template>
      </pfy-table>
    </nz-tab>
    <nz-tab [nzTitle]="'ZIL'">
      <pfy-table
        [tblColumns]="zilTblColumns"
        [tblData]="zilPipelinePage.content"
        [tblTotal]="zilPipelinePage.totalElements"
        [(pageIndex)]="zilPage"
        [loading]="isZilLoading"
        (detailClick)="handleZilDetailClick($event)"
        [pageable]="true"
        [pageSizeOptions]="zipPageSizeOptions"
        (pageSizeChange)="handlePageSizeChange($event)"
      ></pfy-table>
    </nz-tab>
    <nz-tab [nzTitle]="'LTC'">
    </nz-tab>
    <nz-tab [nzTitle]="'USDT'">
    </nz-tab>
  </nz-tabset>
</div>
